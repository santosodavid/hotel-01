/**
 * String.format for JavaScript
 * Copyright (c) Daniel Mester Pirttijärvi 2009
 * 
 * www.masterdata.se/r/string_format_for_javascript/
 */

//var msf={};(function(){function C(E){return(E<10?"0":"")+E}function D(E){E=E.toLowerCase();var F={name:"en-GB",d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy",s:"yyyy-MM-ddTHH:mm:ss",_m:["January","February","March","April","May","June","July","August","September","October","November","December"],_d:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_r:".",_t:",",
//_c:"£#,0.00",_ct:",",_cr:"."};if(E.substr(0,2)=="sv"){F.name="sv-SE";F.d="yyyy-MM-dd";F.D="den dd MMMM yyyy";F._m=["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"];F._d=["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag"];F._r=",";F._t=" ";F._ct=".";F._cr=",";F._c="#,0.00 kr"}else{if(E!="en-gb"){F.name="en-US";F.t="hh:mm tt";F.T="hh:mm:ss tt";F.d="MM/dd/yyyy";F.D="MMMM dd, yyyy";F.Y="MMMM, yyyy";F._c="#,0.00"}}F.f=F.D+" "+F.t;F.F=F.D+" "+F.T;F.g=F.d+" "+F.t;F.G=F.d+" "+F.T;return F}function B(L,Q){var S=0,P=-1,H=-1,I=0,E=0,N=-1,F=false,O=true,J=[],G,K;function R(T){for(var U=0;U<T.length;U++){J.push(T.charAt(U));if(I>1&&I--%3==1){J.push(Q.t)}}}for(K=0;K<Q.f.length;K++){G=Q.f.charAt(K);E+=F;if(G=="0"){if(F){N=E}else{if(P<0){P=S}}}S+=!F&&(G=="0"||G=="#");F=F||G=="."}P=P<0?1:S-P;if(L<0){J.push("-")}L=(Math.round(Math.abs(L)*Math.pow(10,E))/Math.pow(10,E)).toString();H=L.indexOf(".");H=H<0?L.length:H;K=H-S;if(Q.f.match(/^[^\.]*[0#],[0#]/)){I=Math.max(H,P)}for(var M=0;M<Q.f.length;M++){G=Q.f.charAt(M);if(G=="#"||G=="0"){if(K<H){if(K>=0){if(O){R(L.substr(0,K))}R(L.charAt(K))}else{if(K>=H-P){R("0")}}O=false}else{if(N-->0||K<L.length){R(K>=L.length?"0":L.charAt(K))}}K++}else{if(G=="."){if(L.length>++K||N>0){J.push(Q.r)}}else{if(G!==","){J.push(G)}}}}return J.join("")}Number.prototype.__Format=function(F){var H=Number(this);if(F=="X"){return Math.round(H).toString(16).toUpperCase()}else{if(F=="x"){return Math.round(H).toString(16)}else{var G={t:msf.LC._t,r:msf.LC._r};var J="0.################",I=F?F.toLowerCase():null;if(I===null||I=="g"){F=J}else{if(I=="n"){F="#,"+J}else{if(I=="c"){F=msf.LC._c;G.r=msf.LC._cr;G.t=msf.LC._ct}else{if(I=="f"){F="0.00"}}}}if(F.indexOf(",.")!==-1){H/=1000}if(F.indexOf("%")!==-1){H*=100}var E=F.split(";");if(H<0&&E.length>1){H*=-1;G.f=E[1]}else{G.f=E[!H&&E.length>2?2:0]}return B(H,G)}}};Date.prototype.__Format=function(F){var G=this;var E="";var H;if(F.length==1){F=msf.LC[F]}return F.replace(/(d{1,4}|M{1,4}|yyyy|yy|HH|H|hh|h|mm|m|ss|s|tt)/g,function(){switch(arguments[0]){case"dddd":return msf.LC._d[G.getDay()];case"ddd":return msf.LC._d[G.getDay()].substr(0,3);case"dd":return C(G.getDate());case"d":return G.getDate();case"MMMM":return msf.LC._m[G.getMonth()];case"MMM":return msf.LC._m[G.getMonth()].substr(0,3);case"MM":return C(G.getMonth()+1);case"M":return G.getMonth()+1;case"yyyy":return G.getFullYear();case"yy":return G.getFullYear().toString().substr(2);case"HH":return C(G.getHours());case"hh":return C((G.getHours()-1)%12+1);case"H":return G.getHours();case"h":return(G.getHours()-1)%12+1;case"mm":return C(G.getMinutes());case"m":return G.getMinutes();case"ss":return C(G.getSeconds());case"s":return G.getSeconds();case"tt":return G.getHours()<12?"AM":"PM";default:return""}})};String.__Format=function(I,J,H,F){var G=arguments,E;return I.replace(/(\{*)\{((\d+)(\,(-?\d*))?(\:([^\}]*))?)\}/g,function(){var K=arguments;if(K[1]&&K[1].length%2==1){return K[0]}if((E=G[parseInt(K[3],10)+1])===undefined){throw"Missing argument"}var N=E.__Format?E.__Format(K[7]):E.toString();var L=parseInt(K[5],10)||0;var O=Math.abs(L)-N.length;if(O>0){var M=" ";while(M.length<O){M+=" "}N=L>0?N+M:M+N}return K[1]+N}).replace(/\{\{/g,"{")};msf.LC=null;msf.setCulture=function(E){msf.LC=D(E)||D(E.substr(0,2))||D()};msf.setCulture(navigator.systemLanguage||navigator.language||"en-US");var A=Date.prototype;A.format=A.format||A.__Format;A=Number.prototype;A.format=A.format||A.__Format;String.format=String.format||String.__Format})();


// String.format for JavaScript 1.08 | go.mester.se/sffjs | (c) 2009-2013 Daniel Mester Pirttijärvi
var msf = function () {
    function u(a) { return 10 > a ? n + a : a } function E(a) { for (var b in F) a[b] = a[b] || F[b]; a.f = a.f || a.D + " " + a.t; a.F = a.F || a.D + " " + a.T; a.g = a.g || a.d + " " + a.t; a.G = a.G || a.d + " " + a.T; a.m = a.M; a.y = a.Y; return a } function C() { G.LC = e = A && (D[A[w]()] || D[A.split("-")[0][w]()]) || J } function H(a, b) { var g = Math.pow(10, b || 0); return "" + Math.round(Math.abs(a) * g) / g } function I(a) { var b = a.indexOf("."); return 0 > b ? a.length : b } function r(a, b) { for (var g = 0, h = b.length; g < h; g++) a.push(b.charAt(g)), 1 < a.g && 1 == a.g-- % 3 && a.push(a.t) } function v(a,
b) { return a.substr(0, (a.length + 1 - (b || 0)) / 2) } function s(a, b, g, h, l, d) { var c = []; c.t = d; 0 > a && c.push("-"); a = H(a, h); h = c.g = I(a); d = a; var f = d.indexOf("."); d = 0 > f ? 0 : d.length - f - 1; for (b -= h; 0 < b--; ) r(c, n); r(c, a.substr(0, h)); if (g || d) { c.push(l); r(c, a.substr(h + 1)); for (g -= d; 0 < g--; ) r(c, n) } return c.join("") } var G = { version: "1.08", setCulture: function (a) { A = a; C() }, registerCulture: function (a) { D[a.name[w]()] = E(a); C() } }, x = Number, t = String, n = "0", w = "toUpperCase", F = { name: "", d: "MM/dd/yyyy", D: "dddd, dd MMMM yyyy", t: "HH:mm", T: "HH:mm:ss",
    M: "MMMM dd", Y: "yyyy MMMM", s: "yyyy-MM-ddTHH:mm:ss", _M: "January February March April May June July August September October November December".split(" "), _D: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "), _r: ".", _t: ",",
    //_c: "\u00a4#,0.00", 
    _c: "#,0.00",
    _ct: ",", _cr: ".", _am: "AM", _pm: "PM"
}, J = E({}), e, A = navigator.systemLanguage || navigator.language || "", D = {}; x.prototype.__Format = function (a) {
    var b = x(this), g = e._r, h = e._t; if (!isFinite(b)) return "" + b; if (!a && a !== n) return s(b, 0, 0, 10, g); var l = a.match(/^([a-zA-Z])(\d*)$/);
    if (l) {
        var d = l[1][w](), c = parseInt(l[2], 10), c = 15 < c ? 15 : c; switch (d) {
            case "D": return s(b, isNaN(c) ? 1 : c, 0, 0); case "F": h = ""; case "N": return s(b, 1, isNaN(c) ? 2 : c, isNaN(c) ? 2 : c, g, h); case "G": case "E": a = 0; for (var f = Math.abs(b); 10 <= f; ) f /= 10, a++; for (; 1 > f; ) f *= 10, a--; var l = l[1], p = 3; if ("G" == d) { if (-5 < a && (!c || a < c)) return s(b, 1, c ? c - (0 < a ? a + 1 : 1) : 0, c ? c - (0 < a ? a + 1 : 1) : 10, g); l = "G" == l ? "E" : "e"; p = 2; d = (c || 1) - 1; c = (c || 11) - 1 } else d = c = isNaN(c) ? 6 : c; 0 <= a && (l += "+"); 0 > b && (f *= -1); return s("" + f, 1, d, c, g, h) + l + s(a, p, 0); case "P": return s(100 * b,
1, isNaN(c) ? 2 : c, isNaN(c) ? 2 : c, g, h) + " %"; case "X": b = Math.round(b).toString(16); "X" == l[1] && (b = b[w]()); for (c -= b.length; 0 < c--; ) b = n + b; return b; case "C": a = e._c; g = e._cr; h = e._ct; break; case "R": return "" + b
        } 
    } -1 !== a.indexOf(",.") && (b /= 1E3); -1 !== a.indexOf("%") && (b *= 100); c = a.split(";"); 0 > b && 1 < c.length ? (b *= -1, a = c[1]) : a = c[!b && 2 < c.length ? 2 : 0]; var c = a, q = a.match(/^[^\.]*[0#],[0#]/) && h, y = 0, m = h = -1, m = 0; a = -1; for (var z = 0, f = 1, k, l = c.length, p = [], d = 0; d < l; d++) if (k = c.charAt(d), "'" == k || '"' == k) { if (d = c.indexOf(k, d + 1), 0 > d) break } else if ("\\" ==
k) d++; else { if (k == n || "#" == k) m += z, k == n && (z ? a = m : 0 > h && (h = y)), y += !z; z = z || "." == k } h = 0 > h ? 1 : y - h; 0 > b && p.push("-"); b = H(b, m); m = I(b); d = m - y; p.g = Math.max(m, h); p.t = q; for (q = inString = 0; q < l; q++) if (k = c.charAt(q), "'" == k || '"' == k) { k = c.indexOf(k, q + 1); p.push(c.substring(q + 1, 0 > k ? c.length : k)); if (0 > k) break; q = k } else if ("\\" == k) p.push(c.charAt(q + 1)), q++; else if ("#" == k || k == n) { if (d < m) 0 <= d ? (f && r(p, b.substr(0, d)), r(p, b.charAt(d))) : d >= m - h && r(p, n), f = 0; else if (0 < a-- || d < b.length) r(p, d >= b.length ? n : b.charAt(d)); d++ } else "." == k ? (b.length >
++d || 0 < a) && p.push(g) : "," !== k && p.push(k); return p.join("")
}; Date.prototype.__Format = function (a) {
    var b = this.getFullYear(), g = this.getMonth(), h = this.getDate(), l = this.getDay(), d = this.getHours(), c = this.getMinutes(), f = this.getSeconds(); a = a || "G"; 1 == a.length && (a = e[a] || a); return a.replace(/(\\.|'[^']*'|"[^"]*"|d{1,4}|M{1,4}|yyyy|yy|HH?|hh?|mm?|ss?|tt?)/g, function (a) {
        return "dddd" == a ? e._D[l] : "ddd" == a ? e._d ? e._d[l] : e._D[l].substr(0, 3) : "dd" == a ? u(h) : "d" == a ? h : "MMMM" == a ? e._M[g] : "MMM" == a ? e._m ? e._m[g] : e._M[g].substr(0,
3) : "MM" == a ? u(g + 1) : "M" == a ? g + 1 : "yyyy" == a ? b : "yy" == a ? ("" + b).substr(2) : "HH" == a ? u(d) : "H" == a ? d : "hh" == a ? u((d - 1) % 12 + 1) : "h" == a ? (d - 1) % 12 + 1 : "mm" == a ? u(c) : "m" == a ? c : "ss" == a ? u(f) : "s" == a ? f : "tt" == a ? 12 > d ? e._am : e._pm : "t" == a ? (12 > d ? e._am : e._pm).charAt(0) : a.substr(1, a.length - 1 - ("\\" != a.charAt(0)))
    })
}; t.__Format = function (a, b, g, h) {
    var l = arguments; return a.replace(/(\{+)((\d+|[a-zA-Z_$]\w+(?:\.[a-zA-Z_$]\w+|\[\d+\])*)(?:\,(-?\d*))?(?:\:([^\}]*))?)(\}+)|(\{+)|(\}+)/g, function () {
        var a = arguments; if (a[7]) a = v(a[7]); else if (a[8]) a =
v(a[8]); else if (0 == a[1].length % 2 || 0 == a[6].length % 2) a = v(a[1]) + a[2] + v(a[6]); else {
            var b = v(a[1], 1), f = a[3], g = a[4], h = a[5], e = l, m = parseInt(f, 10), n = ""; if (isNaN(m)) { e = e[1]; if (null !== e && void 0 !== e) for (var m = /(\.([a-zA-Z_$]\w+)|\[(\d+)\])/g, k = /^[a-zA-Z_$]\w+/.exec(f), e = e[k[0]]; null !== e && void 0 !== e && (k = m.exec(f)); ) e = e[k[2] || x(k[3])]; f = e } else { if (m > e.length - 2) throw "Missing argument"; f = e[m + 1] } f = !(null !== f && void 0 !== f) ? "" : f.__Format ? f.__Format(h) : "" + f; g = x(g) || 0; for (h = Math.abs(g) - f.length; 0 < h--; ) n += " "; a = b + (0 > g ? f +
n : n + f) + v(a[6], 1)
        } return a
    })
}; var t = [Date.prototype, x.prototype, t], B; for (B in t) t[B].format = t[B].format || t[B].__Format; C(); return G
} ();
